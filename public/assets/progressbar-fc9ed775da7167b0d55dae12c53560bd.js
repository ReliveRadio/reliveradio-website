// starts & ends are two Date objects that are passed in from the index view!
$(function(){function i(r,i){var s=r.getTime(),o=i.getTime(),u=(new Date).getTime(),a=Math.abs(o-s),f=Math.abs(u-s),l=f/a*100,c=Math.floor(100-l),h=Math.abs(o-u);e.each(function(){$(this).width(l+"%")}),t.each(function(){$(this).text(Math.floor(h/60/1e3))}),n.each(function(){$(this).text(Math.floor(l)+"%")}),n.each(function(){$(this).text(c+"%")})}var e=$(".liveprogress"),t=$(".timeleft"),n=$(".percentplayed"),r=$(".percentleft");starts.setMonth(starts.getMonth()-1),ends.setMonth(ends.getMonth()-1),i(starts,ends);var s=1e4;window.setInterval(function(){i(starts,ends);var e=new Date;e>ends&&$.get("/",null,null,"script")},s)});